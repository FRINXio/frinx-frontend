{"result":[{"updateTime":1676465364783,"name":"Add_and_install_cli_device","description":"{\"description\": \"Add cli device to device inventory and install\", \"labels\": [\"BASICS\",\"CLI\",\"INVENTORY\",\"MAIN\"]}","version":1,"tasks":[{"name":"INVENTORY_add_cli_device","taskReferenceName":"INVENTORY_add_cli_deviceRefName_svxR","inputParameters":{"device_id":"${workflow.input.device_id}","type":"${workflow.input.type}","version":"${workflow.input.version}","host":"${workflow.input.host}","protocol":"${workflow.input.protocol}","port":"${workflow.input.port}","username":"${workflow.input.username}","password":"${workflow.input.password}","journal-size":"${workflow.input.journal-size}","parsing-engine":"${workflow.input.parsing-engine}","labels":"${workflow.input.labels}","uniconfig_zone":"${workflow.input.uniconfig_zone}","service_state":"${workflow.input.service_state}"},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"INVENTORY_install_device_by_id","taskReferenceName":"INVENTORY_install_device_by_idRefName_Jx5d","inputParameters":{"device_id":"${INVENTORY_add_cli_deviceRefName_svxR.output.response_body.id}"},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]}],"inputParameters":[],"outputParameters":{},"schemaVersion":2,"restartable":true,"workflowStatusListenerEnabled":false,"ownerEmail":"fm-workflows","timeoutPolicy":"ALERT_ONLY","timeoutSeconds":0,"variables":{},"inputTemplate":{},"hasSchedule":false,"expectedScheduleName":"Add_and_install_cli_device:1"},{"updateTime":1676465367910,"name":"Add_and_install_netconf_device","description":"{\"description\": \"Add netconf device to device inventory and install\", \"labels\": [\"BASICS\",\"NETCONF\",\"INVENTORY\",\"MAIN\"]}","version":1,"tasks":[{"name":"INVENTORY_add_netconf_device","taskReferenceName":"INVENTORY_add_netconf_deviceRefName_9fAr","inputParameters":{"device_id":"${workflow.input.device_id}","host":"${workflow.input.host}","port":"${workflow.input.port}","keepalive-delay":"${workflow.input.keepalive-delay}","tcp-only":"${workflow.input.tcp-only}","username":"${workflow.input.username}","password":"${workflow.input.password}","uniconfig-native":"${workflow.input.uniconfig-native}","blacklist":"${workflow.input.blacklist}","labels":"${workflow.input.labels}","uniconfig_zone":"${workflow.input.uniconfig_zone}","service_state":"${workflow.input.service_state}"},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"INVENTORY_install_device_by_id","taskReferenceName":"INVENTORY_install_device_by_idRefName_JtUx","inputParameters":{"device_id":"${INVENTORY_add_netconf_deviceRefName_9fAr..output.response_body.id}"},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]}],"inputParameters":[],"outputParameters":{},"schemaVersion":2,"restartable":true,"workflowStatusListenerEnabled":false,"ownerEmail":"fm-workflows","timeoutPolicy":"ALERT_ONLY","timeoutSeconds":0,"variables":{},"inputTemplate":{},"hasSchedule":false,"expectedScheduleName":"Add_and_install_netconf_device:1"},{"updateTime":1676465367558,"name":"Add_cli_device_to_inventory","description":"{\"description\": \"Add cli device to device inventory\", \"labels\": [\"BASICS\",\"CLI\",\"INVENTORY\",\"MAIN\"]}","version":1,"tasks":[{"name":"INVENTORY_add_cli_device","taskReferenceName":"INVENTORY_add_cli_deviceRefName_4NkM","inputParameters":{"device_id":"${workflow.input.device_id}","type":"${workflow.input.type}","version":"${workflow.input.version}","host":"${workflow.input.host}","protocol":"${workflow.input.protocol}","port":"${workflow.input.port}","username":"${workflow.input.username}","password":"${workflow.input.password}","journal-size":"${workflow.input.journal-size}","parsing-engine":"${workflow.input.parsing-engine}","labels":"${workflow.input.labels}","uniconfig_zone":"${workflow.input.uniconfig_zone}","service_state":"${workflow.input.service_state}"},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]}],"inputParameters":[],"outputParameters":{},"schemaVersion":2,"restartable":false,"workflowStatusListenerEnabled":false,"ownerEmail":"fm-workflows","timeoutPolicy":"ALERT_ONLY","timeoutSeconds":0,"variables":{},"inputTemplate":{},"hasSchedule":false,"expectedScheduleName":"Add_cli_device_to_inventory:1"},{"updateTime":1676465364503,"name":"Add_netconf_device_to_inventory","description":"{\"description\": \"Add netconf device to device inventory\", \"labels\": [\"BASICS\",\"NETCONF\",\"INVENTORY\",\"MAIN\"]}","version":1,"tasks":[{"name":"INVENTORY_add_netconf_device","taskReferenceName":"INVENTORY_add_netconf_deviceRefName_wt5s","inputParameters":{"device_id":"${workflow.input.device_id}","host":"${workflow.input.host}","port":"${workflow.input.port}","keepalive-delay":"${workflow.input.keepalive-delay}","tcp-only":"${workflow.input.tcp-only}","username":"${workflow.input.username}","password":"${workflow.input.password}","uniconfig-native":"${workflow.input.uniconfig-native}","blacklist":"${workflow.input.blacklist}","labels":"${workflow.input.labels}","uniconfig_zone":"${workflow.input.uniconfig_zone}","service_state":"${workflow.input.service_state}"},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]}],"inputParameters":[],"outputParameters":{},"schemaVersion":2,"restartable":false,"workflowStatusListenerEnabled":false,"ownerEmail":"fm-workflows","timeoutPolicy":"ALERT_ONLY","timeoutSeconds":0,"variables":{},"inputTemplate":{},"hasSchedule":false,"expectedScheduleName":"Add_netconf_device_to_inventory:1"},{"updateTime":1676465365478,"name":"Allocate_ipv4_resource","description":"{\"description\": \"Claim IPv4 resource\", \"labels\": [\"RESOURCE_MANAGER\"]}","version":1,"tasks":[{"name":"RESOURCE_MANAGER_query_pool_by_tag","taskReferenceName":"query_pool_by_tag","inputParameters":{"poolTag":"${workflow.input.pool_name}"},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"decisionTask","taskReferenceName":"pool_exists","inputParameters":{"pool_exists":"${query_pool_by_tag.output.response_body.data.SearchPoolsByTags}"},"type":"DECISION","caseExpression":"$.pool_exists.length > 0 ? 'True' : 'False'","decisionCases":{"False":[{"name":"terminate","taskReferenceName":"terminate_cleanup_pool","inputParameters":{"terminationStatus":"FAILED","workflowOutput":{"status":"Pool with name \"${workflow.input.pool_name}\" do not exists."}},"type":"TERMINATE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]}]},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"decisionTask","taskReferenceName":"desired_value_not_null","inputParameters":{"desiredValue":"${workflow.input.desired_value}"},"type":"DECISION","caseExpression":"$.desiredValue.length > 0 ? 'True' : 'False'","decisionCases":{"True":[{"name":"RESOURCE_MANAGER_claim_resource","taskReferenceName":"claim_resource_with_desired_value","inputParameters":{"poolId":"${query_pool_by_tag.output.response_body.data.SearchPoolsByTags[0].id}","userInput":{"desiredValue":"${workflow.input.desired_value}"},"description":"${workflow.input.description}","alternativeId":"${workflow.input.alternative_id}"},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[],"retryCount":5}],"False":[{"name":"RESOURCE_MANAGER_claim_resource","taskReferenceName":"claim_resource_without_desired_value","inputParameters":{"poolId":"${query_pool_by_tag.output.response_body.data.SearchPoolsByTags[0].id}","description":"${workflow.input.description}","alternativeId":"${workflow.input.alternative_id}"},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[],"retryCount":5}]},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"LAMBDA_TASK","taskReferenceName":"lambda_claimAddress","inputParameters":{"lambdaValue":"${claim_resource_with_desired_value.output.response_body.ClaimResource}","lambdaValue2":"${claim_resource_without_desired_value.output.response_body.ClaimResource}","lambdaValue3":"${claim_resource_with_desired_value.output.response_body.ClaimResourceWithAltId}","lambdaValue4":"${claim_resource_without_desired_value.output.response_body.ClaimResourceWithAltId}","scriptExpression":"if ($.lambdaValue)\n\treturn $.lambdaValue\nelse if($.lambdaValue2)\nreturn $.lambdaValue2\nelse if($.lambdaValue3)\nreturn $.lambdaValue3\nelse\nreturn $.lambdaValue4;"},"type":"LAMBDA","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]}],"inputParameters":["{\"pool_name\":{\"value\":\"\",\"description\":\"Pool name [MANDATORY]\",\"type\":\"string\"}, \"description\":{\"value\":\"\",\"description\":\"Description for resource [OPTIONAL]\",\"type\":\"string\"}, \"alternative_id\": {\"value\": \"\", \"description\":\"Alternative ID for resource [OPTIONAL] e.g. {'status':'active'}\", \"type\":\"string\"}, \"desired_value\":{\"value\":\"\",\"description\":\"[OPTIONAL] e.g. If pool address is 192.168.0.1 with prefix 24 my address should be between 192.168.0.0 and 192.168.0.255\",\"type\":\"string\"}}"],"outputParameters":{"response_body":"${lambda_claimAddress.output.result.Properties}"},"schemaVersion":2,"restartable":true,"workflowStatusListenerEnabled":true,"ownerEmail":"fm-workflows","timeoutPolicy":"ALERT_ONLY","timeoutSeconds":0,"variables":{},"inputTemplate":{},"hasSchedule":false,"expectedScheduleName":"Allocate_ipv4_resource:1"},{"updateTime":1676465365266,"name":"Arangodb_create_backup_and_delete_old_backups","description":"{\"description\": \"Arangodb Create backup and delete old backups \", \"labels\": []}","version":1,"tasks":[{"name":"Arangodb_create_backup","taskReferenceName":"arangodb_create_backup","inputParameters":{},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"Arangodb_delete_backups","taskReferenceName":"arangodb_delete_backups","inputParameters":{"delete_age":"${workflow.input.delete_age}"},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]}],"inputParameters":["{\"delete_age\":{\"value\":\"24\",\"description\":\"Delete all backups older than delete_age in hours\"}}"],"outputParameters":{},"schemaVersion":2,"restartable":true,"workflowStatusListenerEnabled":false,"ownerEmail":"fm-workflows","timeoutPolicy":"ALERT_ONLY","timeoutSeconds":0,"variables":{},"inputTemplate":{},"hasSchedule":false,"expectedScheduleName":"Arangodb_create_backup_and_delete_old_backups:1"},{"updateTime":1676465366663,"name":"Build_read_store_LLDP_topology","description":"{\"description\": \"Build, read and store LLDP topology in database\", \"labels\": [\"DEMO\",\"LLDP\"]}","version":1,"tasks":[{"name":"LLDP_build_topology","taskReferenceName":"LLDP_build_topology","inputParameters":{"node-aggregation":"${workflow.input.node-aggregation}","link-aggregation":"${workflow.input.link-aggregation}","per-node-read-timeout":"${workflow.input.per-node-read-timeout}","concurrent-read-nodes":"${workflow.input.concurrent-read-nodes}","destination-topology":"${workflow.input.destination-topology}"},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"LLDP_read_topology","taskReferenceName":"LLDP_read_topology","inputParameters":{"destination-topology":"${workflow.input.destination-topology}"},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"LLDP_store_topology","taskReferenceName":"LLDP_store_topology","inputParameters":{"destination-topology":"${workflow.input.destination-topology}","content":"${LLDP_read_topology.output.response_body.topology}"},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]}],"inputParameters":["{\"node-aggregation\":{\"value\":\"system-name\",\"description\":\"Which unique attribute of a device to use in order to identify a device. This reduces node duplicity\",\"type\":\"string\"},\"link-aggregation\":{\"value\":\"bidirectional-abbreviations\",\"description\":\"Which unique attribute of a link to use in order to identify a device e.g. source and destination interfaces\",\"type\":\"string\"},\"per-node-read-timeout\":{\"value\":\"30\",\"description\":\"Max time to spend on 1 device in seconds\",\"type\":\"string\"},\"concurrent-read-nodes\":{\"value\":\"8\",\"description\":\"How many devices to query in parallel\",\"type\":\"string\"},\"destination-topology\":{\"value\":\"lldp\",\"description\":\"Name of a topology under which the result will be stored\",\"type\":\"string\"}}"],"outputParameters":{"destination-topology":"${workflow.input.destination-topology}","content":"${LLDP_read_topology.output.response.topology}"},"schemaVersion":2,"restartable":true,"workflowStatusListenerEnabled":false,"ownerEmail":"fm-workflows","timeoutPolicy":"ALERT_ONLY","timeoutSeconds":0,"variables":{},"inputTemplate":{},"hasSchedule":false,"expectedScheduleName":"Build_read_store_LLDP_topology:1"},{"updateTime":1676465367113,"name":"Create_influxdb_bucket","description":"{\"description\":\"Create InfluxDB bucket\",\"labels\":[\"INFLUXDB\"]}","version":1,"tasks":[{"name":"INFLUXDB_create_bucket_if_not_exist","taskReferenceName":"INFLUXDB_create_bucket_if_not_existRefName_tKMV","inputParameters":{"bucket":"${workflow.input.bucket}"},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]}],"inputParameters":[],"outputParameters":{},"schemaVersion":2,"restartable":true,"workflowStatusListenerEnabled":false,"ownerEmail":"fm-workflows","timeoutPolicy":"ALERT_ONLY","timeoutSeconds":0,"variables":{},"inputTemplate":{},"hasSchedule":false,"expectedScheduleName":"Create_influxdb_bucket:1"},{"updateTime":1676465367440,"name":"Create_L2VPN_P2P_OC_uniconfig","description":"{\"description\": \"Create P2P L2VPN in uniconfig\", \"labels\": [\"DEMO\",\"L2VPN\",\"UNICONFIG\",\"OPENCONFIG\"]}","version":2,"tasks":[{"name":"UC_TX_start","taskReferenceName":"tx_start_1","inputParameters":{"devices":"${workflow.input.node01}, ${workflow.input.node02}"},"type":"SUB_WORKFLOW","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"subWorkflowParam":{"name":"UC_TX_start","version":1},"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"UNICONFIG_sync_from_network","taskReferenceName":"uniconfig_sync_from_network_ref_LYVS","inputParameters":{"devices":"${workflow.input.node01}, ${workflow.input.node02}","uniconfig_context":"${tx_start_1.output.uniconfig_context}"},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"UNICONFIG_replace_config_with_oper","taskReferenceName":"uniconfig_replace_config_with_oper_ref_JTJ4","inputParameters":{"devices":"${workflow.input.node01}, ${workflow.input.node02}","uniconfig_context":"${tx_start_1.output.uniconfig_context}"},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"UNICONFIG_write_structured_device_data","taskReferenceName":"UNICONFIG_write_structured_device_data_on_first_node","inputParameters":{"node01":"${workflow.input.node01}","device_id":"${workflow.input.node01}","interface01":"${workflow.input.interface01}","VCID":"${workflow.input.vcid}","uri":"/frinx-openconfig-network-instance:network-instances/network-instance=conn1233","template":"{\r\n      \"frinx-openconfig-network-instance:network-instance\": [\r\n        {\r\n          \"name\": \"conn1233\",\r\n          \"config\": {\r\n            \"name\": \"conn1233\",\r\n            \"type\": \"frinx-openconfig-network-instance-types:L2P2P\"\r\n          },\r\n          \"connection-points\": {\r\n            \"connection-point\": [\r\n              {\r\n                \"connection-point-id\": \"1\",\r\n                \"config\": {\r\n                  \"connection-point-id\": \"1\"\r\n                },\r\n                \"endpoints\": {\r\n                  \"endpoint\": [\r\n                    {\r\n                      \"endpoint-id\": \"default\",\r\n                      \"config\": {\r\n                        \"endpoint-id\": \"default\",\r\n                        \"precedence\": 0,\r\n                        \"type\": \"frinx-openconfig-network-instance-types:LOCAL\"\r\n                      },\r\n                      \"local\": {\r\n                        \"config\": {\r\n                          \"interface\": \"${workflow.input.interface01}\"\r\n                        }\r\n                      }\r\n                    }\r\n                  ]\r\n                }\r\n              },\r\n              {\r\n                \"connection-point-id\": \"2\",\r\n                \"config\": {\r\n                  \"connection-point-id\": \"2\"\r\n                },\r\n                \"endpoints\": {\r\n                  \"endpoint\": [\r\n                    {\r\n                      \"endpoint-id\": \"default\",\r\n                      \"config\": {\r\n                        \"endpoint-id\": \"default\",\r\n                        \"precedence\": 0,\r\n                        \"type\": \"frinx-openconfig-network-instance-types:REMOTE\"\r\n                      },\r\n                      \"remote\": {\r\n                        \"config\": {\r\n                          \"remote-system\": \"10.2.2.2\",\r\n                          \"virtual-circuit-identifier\": ${workflow.input.vcid}\r\n                        }\r\n                      }\r\n                    }\r\n                  ]\r\n                }\r\n              }\r\n            ]\r\n          }\r\n        }\r\n      ]\r\n    \r\n  }","params":"{}","uniconfig_context":"${tx_start_1.output.uniconfig_context}"},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"UNICONFIG_write_structured_device_data","taskReferenceName":"UNICONFIG_write_structured_device_data_on_second_node","inputParameters":{"node02":"${workflow.input.node02}","device_id":"${workflow.input.node02}","interface02":"${workflow.input.interface02}","uri":"/frinx-openconfig-network-instance:network-instances/network-instance=conn1233","template":"{\r\n      \"frinx-openconfig-network-instance:network-instance\": [\r\n        {\r\n          \"name\": \"conn1233\",\r\n          \"config\": {\r\n            \"name\": \"conn1233\",\r\n            \"type\": \"frinx-openconfig-network-instance-types:L2P2P\"\r\n          },\r\n          \"connection-points\": {\r\n            \"connection-point\": [\r\n              {\r\n                \"connection-point-id\": \"1\",\r\n                \"config\": {\r\n                  \"connection-point-id\": \"1\"\r\n                },\r\n                \"endpoints\": {\r\n                  \"endpoint\": [\r\n                    {\r\n                      \"endpoint-id\": \"default\",\r\n                      \"config\": {\r\n                        \"endpoint-id\": \"default\",\r\n                        \"precedence\": 0,\r\n                        \"type\": \"frinx-openconfig-network-instance-types:LOCAL\"\r\n                      },\r\n                      \"local\": {\r\n                        \"config\": {\r\n                          \"interface\": \"${workflow.input.interface02}\"\r\n                        }\r\n                      }\r\n                    }\r\n                  ]\r\n                }\r\n              },\r\n              {\r\n                \"connection-point-id\": \"2\",\r\n                \"config\": {\r\n                  \"connection-point-id\": \"2\"\r\n                },\r\n                \"endpoints\": {\r\n                  \"endpoint\": [\r\n                    {\r\n                      \"endpoint-id\": \"default\",\r\n                      \"config\": {\r\n                        \"endpoint-id\": \"default\",\r\n                        \"precedence\": 0,\r\n                        \"type\": \"frinx-openconfig-network-instance-types:REMOTE\"\r\n                      },\r\n                      \"remote\": {\r\n                        \"config\": {\r\n                          \"remote-system\": \"10.1.1.1\",\r\n                          \"virtual-circuit-identifier\": ${workflow.input.vcid}\r\n                        }\r\n                      }\r\n                    }\r\n                  ]\r\n                }\r\n              }\r\n            ]\r\n          }\r\n        }\r\n      ]\r\n    \r\n  }","params":"{}","uniconfig_context":"${tx_start_1.output.uniconfig_context}"},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"UNICONFIG_dryrun_commit","taskReferenceName":"UNICONFIG_dryrun_commitRefName_rxWZ","inputParameters":{"devices":"${workflow.input.node01}, ${workflow.input.node02}","uniconfig_context":"${tx_start_1.output.uniconfig_context}"},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"UNICONFIG_commit","taskReferenceName":"uniconfig_commit_ref_RXFF","inputParameters":{"devices":"${workflow.input.node01}, ${workflow.input.node02}","uniconfig_context":"${tx_start_1.output.uniconfig_context}"},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"decisionTask","taskReferenceName":"decisionTaskRef_9LC8","inputParameters":{"param":"${uniconfig_commit_ref_RXFF.output.responses[0].response_body.output.overall-status}"},"type":"DECISION","caseValueParam":"param","decisionCases":{"complete":[{"name":"Post_to_Slack","taskReferenceName":"post_to_slack_ref_94YO","inputParameters":{"slack_webhook_id":"T7UQ7KATX/BP8M0S3EH/W3YpmbUr2fQDEA7WIoWcJIXX","message_text":"Configuration attempt succeeded!"},"type":"SUB_WORKFLOW","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"subWorkflowParam":{"name":"Post_to_Slack","version":1},"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]}]},"defaultCase":[{"name":"Post_to_Slack","taskReferenceName":"post_to_slack_ref_284C","inputParameters":{"slack_webhook_id":"T7UQ7KATX/BP8M0S3EH/W3YpmbUr2fQDEA7WIoWcJIXX","message_text":"${uniconfig_commit_ref_RXFF.output.response_body.output.overall-status}"},"type":"SUB_WORKFLOW","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"subWorkflowParam":{"name":"Post_to_Slack","version":1},"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]}],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]}],"inputParameters":["{\"node01\":{\"value\":\"IOS01\",\"description\":\"First node of P2P connection\",\"type\":\"string\"},\"node02\":{\"value\":\"IOS02\",\"description\":\"Second node of P2P connection\",\"type\":\"string\"},\"interface01\":{\"value\":\"GigabitEthernet1\",\"description\":\"Customer facing service interface on first node\",\"type\":\"string\"},\"vcid\":{\"value\":\"444\",\"description\":\"Virtual Circuit Identifier (globally unique)\",\"type\":\"string\"},\"interface02\":{\"value\":\"GigabitEthernet3\",\"description\":\"Customer facing service interface on second node\",\"type\":\"string\"}}"],"outputParameters":{"response_body":"Journal for ${workflow.input.node01}:  ${read_journal_cli_device_ref_LJUO.output.journal} --------  Journal for ${workflow.input.node02}:  ${read_journal_cli_device_ref_CDGP.output.journal}"},"failureWorkflow":"UC_TX_rollback","schemaVersion":2,"restartable":true,"workflowStatusListenerEnabled":false,"ownerEmail":"fm-workflows","timeoutPolicy":"ALERT_ONLY","timeoutSeconds":0,"variables":{},"inputTemplate":{},"hasSchedule":false,"expectedScheduleName":"Create_L2VPN_P2P_OC_uniconfig:2"},{"updateTime":1676465365142,"name":"Create_loopback_all_in_uniconfig","description":"{\"description\": \"Create loopback interface for all devices in uniconfig topology\", \"labels\": [\"DEMO\",\"INTERFACES\",\"UNICONFIG\",\"OPENCONFIG\"]}","version":1,"tasks":[{"name":"INVENTORY_get_all_devices_as_dynamic_fork_tasks","taskReferenceName":"read_unified","inputParameters":{"labels":"${workflow.input.labels}","task":"Create_loopback_interface_uniconfig","task_params":"{\"loopback_id\": \"${workflow.input.loopback_id}\"}","optional":"${workflow.input.optional}"},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"DYNAMIC_FORK","taskReferenceName":"create_loopback","inputParameters":{"expectedName":"sub_task","expectedType":"SUB_WORKFLOW","dynamic_tasks":"${read_unified.output.dynamic_tasks}","dynamic_tasks_i":"${read_unified.output.dynamic_tasks_i}"},"type":"SUB_WORKFLOW","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"subWorkflowParam":{"name":"Dynamic_fork","version":1},"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"UNICONFIG_calculate_diff","taskReferenceName":"calc_diff","inputParameters":{"devices":"${create_loopback.output.forkedTasks}"},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"UNICONFIG_dryrun_commit","taskReferenceName":"dryrun_commit","inputParameters":{"devices":"${create_loopback.output.forkedTasks}"},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"UNICONFIG_commit","taskReferenceName":"commit","inputParameters":{"devices":"${create_loopback.output.forkedTasks}"},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]}],"inputParameters":["{\"labels\":{\"value\":\"CREATE_LOOPBACK_DEMO\",\"description\":\"\",\"type\":\"string\"},\"loopback_id\":{\"value\":\"\",\"description\":\"Unique loopback identifier (e.g. 77)\",\"type\":\"string\"},\"optional\":{\"value\": true,\"description\":\"If one of devices doesn't use openconfig model, workflow will continue\",\"type\":\"toggle\", \"options\": [true,false]}}"],"outputParameters":{"interfaces":"${commit.output}"},"schemaVersion":2,"restartable":true,"workflowStatusListenerEnabled":true,"ownerEmail":"fm-workflows","timeoutPolicy":"ALERT_ONLY","timeoutSeconds":0,"variables":{},"inputTemplate":{},"hasSchedule":false,"expectedScheduleName":"Create_loopback_all_in_uniconfig:1"},{"updateTime":1676465364395,"name":"Create_loopback_interface_uniconfig","description":"{\"description\": \"Create loopback interface in uniconfig\", \"labels\": [\"DEMO\",\"INTERFACES\",\"UNICONFIG\",\"OPENCONFIG\"]}","version":1,"tasks":[{"name":"UNICONFIG_write_structured_device_data","taskReferenceName":"UNICONFIG_write_structured_device_data","inputParameters":{"device_id":"${workflow.input.device_id}","uri":"/frinx-openconfig-interfaces:interfaces/interface=Loopback${workflow.input.loopback_id}","template":"{\"interface\":[{\"name\":\"Loopback${workflow.input.loopback_id}\",\"config\":{\"type\":\"iana-if-type:softwareLoopback\",\"enabled\":false,\"name\":\"Loopback${workflow.input.loopback_id}\"}}]}","params":"{}"},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]}],"inputParameters":["{\"device_id\":{\"value\":\"\",\"description\":\"Unique device identifier. Example: IOS01\",\"type\":\"string\"},\"loopback_id\":{\"value\":\"\",\"description\":\"Unique loopback identifier (e.g. 77)\",\"type\":\"string\"}}"],"outputParameters":{"response_body":"${UNICONFIG_write_structured_device_data.output.response_body}"},"schemaVersion":2,"restartable":true,"workflowStatusListenerEnabled":true,"ownerEmail":"fm-workflows","timeoutPolicy":"ALERT_ONLY","timeoutSeconds":0,"variables":{},"inputTemplate":{},"hasSchedule":false,"expectedScheduleName":"Create_loopback_interface_uniconfig:1"},{"updateTime":1676465366527,"name":"Delete_loopback_interface_uniconfig","description":"{\"description\": \"Delete loopback interface in uniconfig\", \"labels\": [\"DEMO\",\"INTERFACES\",\"UNICONFIG\",\"OPENCONFIG\"]}","version":1,"tasks":[{"name":"UNICONFIG_delete_structured_device_data","taskReferenceName":"UNICONFIG_delete_structured_device_data","inputParameters":{"device_id":"${workflow.input.device_id}","uri":"/frinx-openconfig-interfaces:interfaces/interface=Loopback${workflow.input.loopback_id}"},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]}],"inputParameters":["{\"device_id\":{\"value\":\"\",\"description\":\"Unique device identifier. Example: IOS01\",\"type\":\"string\"},\"loopback_id\":{\"value\":\"\",\"description\":\"Unique loopback identifier (e.g. 77)\",\"type\":\"string\"}}"],"outputParameters":{"response_body":"${UNICONFIG_delete_structured_device_data.output.response_body}"},"schemaVersion":2,"restartable":true,"workflowStatusListenerEnabled":true,"ownerEmail":"fm-workflows","timeoutPolicy":"ALERT_ONLY","timeoutSeconds":0,"variables":{},"inputTemplate":{},"hasSchedule":false,"expectedScheduleName":"Delete_loopback_interface_uniconfig:1"},{"updateTime":1676465366283,"name":"Device_identification","description":"{\"description\":\"Identify type and version of device and return it in the output\"}","version":1,"tasks":[{"name":"Device_identification_validate_input_parameters","taskReferenceName":"Device_identification_validate_input_parameters","inputParameters":{"port":"${workflow.input.port}"},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"Create_unique_device_name","taskReferenceName":"create_unique_device_name","inputParameters":{},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"LAMBDA_TASK","taskReferenceName":"is_it_ssh_or_netconf","inputParameters":{"port":"${workflow.input.port}","scriptExpression":"if (+$.port >= 17000){ return {\"conn_type\": \"netconf\"} } else { return {\"conn_type\": \"ssh\"} }"},"type":"LAMBDA","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"decisionTask","taskReferenceName":"decisionTaskRef_ssh_or_telnet_or_netconf","inputParameters":{"param":"${is_it_ssh_or_netconf.output.result.conn_type}"},"type":"DECISION","caseValueParam":"param","decisionCases":{"netconf":[{"name":"Mount_netconf_device_identification","taskReferenceName":"mount_netconf_device_identification","description":"Identify type of netconf device and mount with correct schema","inputParameters":{"device_id":"${create_unique_device_name.output.device_name}","host":"${workflow.input.management_ip}","port":"${workflow.input.port}","username":"${workflow.input.username}","password":"${workflow.input.password}"},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"Identification_of_netconf_device","taskReferenceName":"identification_of_netconf_device","inputParameters":{"device_type":"${mount_netconf_device_identification.output.device_type}","device_id":"${mount_netconf_device_identification.output.mounted_device_id}","sw_version":"${mount_netconf_device_identification.output.sw_version}"},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"terminate_netconf","taskReferenceName":"terminate_netconf","inputParameters":{"terminationStatus":"COMPLETED","workflowOutput":{"name":"${identification_of_netconf_device.output.response_body.device_name}","vendor":"${identification_of_netconf_device.output.response_body.device_vendor}","sw":"${identification_of_netconf_device.output.response_body.device_sw}","sw_version":"${identification_of_netconf_device.output.response_body.device_version}","model":"${identification_of_netconf_device.output.response_body.device_model}","management_ip":"${workflow.input.management_ip}"}},"type":"TERMINATE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]}]},"defaultCase":[{"name":"CLI_mount_cli","taskReferenceName":"cli_mount_ssh","inputParameters":{"device_id":"${create_unique_device_name.output.device_name}","type":"*","version":"*","host":"${workflow.input.management_ip}","protocol":"ssh","port":"${workflow.input.port}","parsing-engine":"one-line-parser","uniconfig_tx_id":"","username":"${workflow.input.username}","password":"${workflow.input.password}","install-uniconfig-node-enabled":false},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]}],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"CLI_execute_and_read_rpc_cli","taskReferenceName":"cli_execute_and_read_rpc_cli_identificate_vendor","inputParameters":{"device_id":"${create_unique_device_name.output.device_name}","template":"show","params":""},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"LAMBDA_TASK","taskReferenceName":"vendor_type","inputParameters":{"sw_type":"${cli_execute_and_read_rpc_cli_identificate_vendor.output.response_body.output.output}","scriptExpression":"if ($.sw_type.match(\"for a list of subcommands|Incomplete command\")){ return {sw_type: \"cisco\"} } else if ($.sw_type.match(\"SHELL PARSER FAILURE\")){ return {sw_type: \"ciena\"} } else if ($.sw_type.match(\"syntax error, expecting\")){ return {sw_type: \"juniper\"} }"},"type":"LAMBDA","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"decisionTask","taskReferenceName":"decisionTaskRef_cisco_or_ciena_or_juniper","inputParameters":{"param":"${vendor_type.output.result.sw_type}"},"type":"DECISION","caseValueParam":"param","decisionCases":{"cisco":[{"name":"CLI_execute_and_read_rpc_cli","taskReferenceName":"cli_execute_and_read_rpc_cli_for_cisco","inputParameters":{"device_id":"${create_unique_device_name.output.device_name}","template":"terminal length 0\n        terminal width 0\n        sh version\n        sh run hostname","params":"","output_timer":6},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"Identification_of_device","taskReferenceName":"identification_of_device_cisco","inputParameters":{"device_data":"${cli_execute_and_read_rpc_cli_for_cisco.output.response_body.output.output}"},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]}],"ciena":[{"name":"CLI_execute_and_read_rpc_cli","taskReferenceName":"cli_execute_and_read_rpc_cli_for_ciena","inputParameters":{"device_id":"${create_unique_device_name.output.device_name}","template":"system shell set global-more off\n configuration show","params":"","output_timer":2},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"Identification_of_device","taskReferenceName":"identification_of_device_ciena","inputParameters":{"device_data":"${cli_execute_and_read_rpc_cli_for_ciena.output.response_body.output.output}"},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]}],"juniper":[{"name":"CLI_execute_and_read_rpc_cli","taskReferenceName":"cli_execute_and_read_rpc_cli_for_juniper","inputParameters":{"device_id":"${create_unique_device_name.output.device_name}","template":"set cli screen-length 0\n show version","params":"","output_timer":2},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"Identification_of_device","taskReferenceName":"identification_of_device_juniper","inputParameters":{"device_data":"${cli_execute_and_read_rpc_cli_for_juniper.output.response_body.output.output}"},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]}]},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"identification_of_device_exclusive_join","taskReferenceName":"identification_of_device_exclusive_join","inputParameters":{},"type":"EXCLUSIVE_JOIN","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":["identification_of_device_ciena","identification_of_device_cisco","identification_of_device_juniper"],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"CLI_unmount_cli","taskReferenceName":"CLI_unmount_cli","inputParameters":{"device_id":"${create_unique_device_name.output.device_name}"},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"terminate","taskReferenceName":"terminate_completed","inputParameters":{"terminationStatus":"COMPLETED","workflowOutput":{"name":"${identification_of_device_exclusive_join.output.response_body.device_name}","vendor":"${identification_of_device_exclusive_join.output.response_body.device_vendor}","sw":"${identification_of_device_exclusive_join.output.response_body.device_sw}","sw_version":"${identification_of_device_exclusive_join.output.response_body.device_version}","model":"${identification_of_device_exclusive_join.output.response_body.device_model}","management_ip":"${workflow.input.management_ip}"}},"type":"TERMINATE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]}],"inputParameters":["{\"management_ip\":{\"value\":\"sample-topology\",\"description\":\"IP or hostname of the management endpoint on a device\"},\"port\": {\"value\": \"10000\",\"description\":\"e.g 10000, 10001, 17000\",\"type\":\"string\"},\"username\": {\"value\": \"frinx\",\"description\":\"Username to device\",\"type\":\"string\"},\"password\": {\"value\": \"frinx\",\"description\":\"Password to device\",\"type\":\"string\"}}"],"outputParameters":{},"schemaVersion":2,"restartable":false,"workflowStatusListenerEnabled":true,"ownerEmail":"fm-workflows","timeoutPolicy":"ALERT_ONLY","timeoutSeconds":0,"variables":{},"inputTemplate":{},"hasSchedule":false,"expectedScheduleName":"Device_identification:1"},{"updateTime":1676465368003,"name":"Device_interface_monitoring","description":"{\"description\":\"Write interface statistics from device to InfluxDB\",\"labels\":[\"INFLUXDB\"]}","version":1,"tasks":[{"name":"LAMBDA_TASK","taskReferenceName":"URI_encode_aFfh","inputParameters":{"lambdaValue":"${workflow.input.interface-name}","scriptExpression":"var encoded = encodeURIComponent($.lambdaValue);\nreturn encoded"},"type":"LAMBDA","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"Netconf_read_structured_device_data","taskReferenceName":"Netconf_read_structured_device_dataRefName_EZW4","inputParameters":{"device_id":"${workflow.input.node-id}","uri":"/Cisco-IOS-XR-pfi-im-cmd-oper:interfaces/interface-xr/interface=${URI_encode_aFfh.output.result}","uniconfig_tx_id":""},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"jsonJQ_task","taskReferenceName":"jsonJQ_YtC5","inputParameters":{"key":"${Netconf_read_structured_device_dataRefName_EZW4.output.response_body.interface}","queryExpression":".key | select(. != null) | .[].\"data-rates\" + .[].\"interface-statistics\".\"full-interface-stats\""},"type":"JSON_JQ_TRANSFORM","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"INFLUXDB_write_data","taskReferenceName":"INFLUXDB_write_dataRefName_HmZZ","inputParameters":{"bucket":"devices","tags":{"node-id":"${workflow.input.node-id}","interface-name":"${workflow.input.interface-name}"},"fields":"${jsonJQ_YtC5.output.result}","measurement":"full-interface-stats"},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]}],"inputParameters":["{\"node-id\":{\"value\":\"asr9k\",\"description\":\"node-id of the device that we read the data from\",\"type\":\"string\",\"constraint\":\"\"},\"interface-name\":{\"value\":\"MgmtEth0/RSP0/CPU0/0\",\"description\":\"interface of the device that we read the stats data from\",\"type\":\"string\",\"constraint\":\"\"}}"],"outputParameters":{},"schemaVersion":2,"restartable":true,"workflowStatusListenerEnabled":false,"ownerEmail":"fm-workflows","timeoutPolicy":"ALERT_ONLY","timeoutSeconds":0,"variables":{},"inputTemplate":{},"hasSchedule":false,"expectedScheduleName":"Device_interface_monitoring:1"},{"updateTime":1676465363936,"name":"Device_memory_monitoring","description":"{\"description\":\"Write memory statistics from device to InfluxDB\",\"labels\":[\"INFLUXDB\"]}","version":1,"tasks":[{"name":"Netconf_read_structured_device_data","taskReferenceName":"Netconf_read_structured_device_dataRefName_EZW5","inputParameters":{"device_id":"${workflow.input.node-id}","uri":"/Cisco-IOS-XR-nto-misc-shmem-oper:memory-summary","uniconfig_tx_id":""},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"LAMBDA_TASK","taskReferenceName":"lambda_WeAg","inputParameters":{"lambdaValue":"${Netconf_read_structured_device_dataRefName_EZW5.output.response_body.memory-summary.nodes.node}","scriptExpression":"return $.lambdaValue.length"},"type":"LAMBDA","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"Loop Task","taskReferenceName":"LoopTask","inputParameters":{"value":"${lambda_WeAg.output.result}"},"type":"DO_WHILE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopCondition":"if ( $.LoopTask['iteration'] < $.value ) { true; } else { false; }","loopOver":[{"name":"LAMBDA_TASK","taskReferenceName":"lambda_rMMU","inputParameters":{"lambdaValue":"${Netconf_read_structured_device_dataRefName_EZW5.output.response_body.memory-summary.nodes.node}","iterator":"${LoopTask.output.iteration}","scriptExpression":"if($.iterator == null){\n return $.lambdaValue[0]\n} else {\n return $.lambdaValue[$.iterator];\n}"},"type":"LAMBDA","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"INFLUXDB_write_data","taskReferenceName":"INFLUXDB_write_dataRefName_HmZZ","inputParameters":{"bucket":"devices","tags":{"node-id":"${workflow.input.node-id}","node-name":"${lambda_rMMU.output.result.node-name}"},"fields":"${lambda_rMMU.output.result.summary}","measurement":"memory"},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]}]}],"inputParameters":["{\"node-id\":{\"value\":\"asr9k\",\"description\":\"node-id of the device that we read the data from\",\"type\":\"string\",\"constraint\":\"\"}}"],"outputParameters":{},"schemaVersion":2,"restartable":true,"workflowStatusListenerEnabled":false,"ownerEmail":"fm-workflows","timeoutPolicy":"ALERT_ONLY","timeoutSeconds":0,"variables":{},"inputTemplate":{},"hasSchedule":false,"expectedScheduleName":"Device_memory_monitoring:1"},{"updateTime":1676465363338,"name":"Dynamic_fork","description":"{\"description\": \"A dynamic fork + join task with input validation\", \"labels\": [\"BASICS\",\"UTILS\"]}","version":1,"tasks":[{"name":"LAMBDA_TASK","taskReferenceName":"lambdaValidator","inputParameters":{"lambdaValue":"${workflow.input.dynamic_tasks}","scriptExpression":"if ($.lambdaValue.length > 100) {\n    return false\n} \nfor (var i = 0; i < $.lambdaValue.length; i = i + 1) {\n  if ($.lambdaValue[i].name !== $.expectedName || $.lambdaValue[i].type !== $.expectedType) {\n    return false\n  }\n}\n\nreturn $.lambdaValue","expectedName":"${workflow.input.expectedName}","expectedType":"${workflow.input.expectedType}"},"type":"LAMBDA","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"decisionTask","taskReferenceName":"decision","inputParameters":{"result":"${lambdaValidator.output.result}"},"type":"DECISION","caseValueParam":"result","decisionCases":{"false":[{"name":"terminateTask","taskReferenceName":"terminate","inputParameters":{"terminationStatus":"FAILED","workflowOutput":"Dynamic tasks don't contain expected name ${workflow.input.expectedName} or expected type ${workflow.input.expectedType}"},"type":"TERMINATE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]}]},"defaultCase":[{"name":"dynamic_fork","taskReferenceName":"fork","inputParameters":{"dynamic_tasks":"${lambdaValidator.output.result}","dynamic_tasks_i":"${workflow.input.dynamic_tasks_i}"},"type":"FORK_JOIN_DYNAMIC","decisionCases":{},"dynamicForkTasksParam":"dynamic_tasks","dynamicForkTasksInputParamName":"dynamic_tasks_i","defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"join","taskReferenceName":"join","inputParameters":{},"type":"JOIN","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]}],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]}],"inputParameters":["{\"dynamic_tasks\":{\"value\":\"\",\"description\":\"\",\"type\":\"string\"},\"expectedName\":{\"value\":\"\",\"description\":\"\",\"type\":\"string\"},\"expectedType\":{\"value\":\"\",\"description\":\"\",\"type\":\"string\"},\"dynamic_tasks_i\":{\"value\":\"\",\"description\":\"\",\"type\":\"string\"}}"],"outputParameters":{"forkedTasks":"${fork.input.forkedTasks}"},"schemaVersion":2,"restartable":true,"workflowStatusListenerEnabled":false,"ownerEmail":"fm-workflows","timeoutPolicy":"ALERT_ONLY","timeoutSeconds":0,"variables":{},"inputTemplate":{},"hasSchedule":false,"expectedScheduleName":"Dynamic_fork:1"},{"updateTime":1676465364294,"name":"Export_LLDP_topology","description":"{\"description\": \"Export lldp topology\", \"labels\": [\"DEMO\",\"LLDP\"]}","version":1,"tasks":[{"name":"LLDP_export_topology","taskReferenceName":"LLDP_export_topology","inputParameters":{},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]}],"inputParameters":[],"outputParameters":{"export":"${LLDP_export_topology.output.response_body}"},"schemaVersion":2,"restartable":true,"workflowStatusListenerEnabled":true,"ownerEmail":"fm-workflows","timeoutPolicy":"ALERT_ONLY","timeoutSeconds":0,"variables":{},"inputTemplate":{},"hasSchedule":false,"expectedScheduleName":"Export_LLDP_topology:1"},{"updateTime":1676465366771,"name":"Install_all_from_inventory","description":"{\"description\": \"Install all devices from device inventory\", \"labels\": [\"INVENTORY\"]}","version":1,"tasks":[{"name":"INVENTORY_get_pages_cursors","taskReferenceName":"INVENTORY_get_pages_cursorsRefName_iHgJ","inputParameters":{"labels":"${workflow.input.labels}"},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"Loop Task","taskReferenceName":"LoopTask","inputParameters":{"value":"${INVENTORY_get_pages_cursorsRefName_iHgJ.output.page_size}"},"type":"DO_WHILE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopCondition":"if ( $.LoopTask['iteration'] < $.value ) { true; } else { false; }","loopOver":[{"name":"LAMBDA_TASK","taskReferenceName":"lambda_rMMU","inputParameters":{"lambdaValue":"${INVENTORY_get_pages_cursorsRefName_iHgJ.output.page_ids}","iterator":"${LoopTask.output.iteration}","scriptExpression":"if($.iterator == null){\n return $.lambdaValue[\"0\"]\n} else {\n return $.lambdaValue[$.iterator.toString()];\n}"},"type":"LAMBDA","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"INVENTORY_get_pages_cursors_fork_tasks","taskReferenceName":"read_inventory","inputParameters":{"task":"Install_from_inventory_batch","page_ids":"${lambda_rMMU.output.result}","labels":"${workflow.input.labels}"},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"dynamic_fork","taskReferenceName":"fork","inputParameters":{"dynamic_tasks":"${read_inventory.output.dynamic_tasks}","dynamic_tasks_i":"${read_inventory.output.dynamic_tasks_i}"},"type":"FORK_JOIN_DYNAMIC","decisionCases":{},"dynamicForkTasksParam":"dynamic_tasks","dynamicForkTasksInputParamName":"dynamic_tasks_i","defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":true,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"join","taskReferenceName":"join","inputParameters":{},"type":"JOIN","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]}]}],"inputParameters":[],"outputParameters":{},"schemaVersion":2,"restartable":true,"workflowStatusListenerEnabled":false,"ownerEmail":"fm-workflows","timeoutPolicy":"ALERT_ONLY","timeoutSeconds":0,"variables":{},"inputTemplate":{},"hasSchedule":false,"expectedScheduleName":"Install_all_from_inventory:1"},{"updateTime":1676465366113,"name":"Install_and_check_cli","description":"{\"description\": \"install, check and leave device installed\", \"labels\": [\"BASICS\",\"CLI\"]}","version":1,"tasks":[{"name":"CLI_mount_cli","taskReferenceName":"mount","inputParameters":{"device_id":"${workflow.input.device_id}","type":"${workflow.input.type}","version":"${workflow.input.version}","host":"${workflow.input.host}","protocol":"${workflow.input.protocol}","port":"${workflow.input.port}","username":"${workflow.input.username}","password":"${workflow.input.password}"},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]}],"inputParameters":["{\"device_id\":{\"value\":\"\",\"description\":\"Unique identifier of device across all systems\",\"type\":\"string\"},\"type\":{\"value\":\"\",\"description\":\"Type of device or device IOS e.g. ios, ios xr\",\"type\":\"string\"},\"version\":{\"value\":\"\",\"description\":\"Version of device or device OS e.g. 15.2\",\"type\":\"string\"},\"host\":{\"value\":\"\",\"description\":\"IP or hostname of the management endpoint on a device\",\"type\":\"string\"},\"protocol\":{\"value\":\"ssh\",\"description\":\"CLI management transport protocol e.g. tcp or ssh\",\"type\":\"string\"},\"port\":{\"value\":\"22\",\"description\":\"TCP port of the management endpoint of a device\",\"type\":\"string\"},\"username\":{\"value\":\"\",\"description\":\"Username credential\",\"type\":\"string\"},\"password\":{\"value\":\"\",\"description\":\"Password credential\",\"type\":\"string\"}}"],"outputParameters":{"mount":"${check_mounted.output.mount}"},"schemaVersion":2,"restartable":true,"workflowStatusListenerEnabled":true,"ownerEmail":"fm-workflows","timeoutPolicy":"ALERT_ONLY","timeoutSeconds":0,"variables":{},"inputTemplate":{},"hasSchedule":false,"expectedScheduleName":"Install_and_check_cli:1"},{"updateTime":1676465366899,"name":"Install_device_by_id","description":"{\"description\": \"Install device from device inventory by device ID\", \"labels\": [\"BASICS\",\"INVENTORY\"]}","version":1,"tasks":[{"name":"INVENTORY_install_device_by_id","taskReferenceName":"INVENTORY_install_device_by_idRefName_knOS","inputParameters":{"device_id":"${workflow.input.device_id}"},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]}],"inputParameters":[],"outputParameters":{},"schemaVersion":2,"restartable":true,"workflowStatusListenerEnabled":false,"ownerEmail":"fm-workflows","timeoutPolicy":"ALERT_ONLY","timeoutSeconds":0,"variables":{},"inputTemplate":{},"hasSchedule":false,"expectedScheduleName":"Install_device_by_id:1"},{"updateTime":1676465366015,"name":"Install_device_by_name","description":"{\"description\": \"Install device from device inventory by device name\", \"labels\": [\"BASICS\",\"INVENTORY\"]}","version":1,"tasks":[{"name":"INVENTORY_install_device_by_name","taskReferenceName":"INVENTORY_install_device_by_nameRefName_kQcE","inputParameters":{"device_name":"${workflow.input.device_name}"},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]}],"inputParameters":[],"outputParameters":{},"schemaVersion":2,"restartable":false,"workflowStatusListenerEnabled":false,"ownerEmail":"fm-workflows","timeoutPolicy":"ALERT_ONLY","timeoutSeconds":0,"variables":{},"inputTemplate":{},"hasSchedule":false,"expectedScheduleName":"Install_device_by_name:1"},{"updateTime":1676465367789,"name":"Install_from_inventory_batch","description":"{\"description\": \"Install devices from inventory in batch\", \"labels\": [\"BASICS\",\"CLI\",\"NETCONF\",\"INVENTORY\",\"MAIN\"]}","version":1,"tasks":[{"name":"INVENTORY_install_in_batch","taskReferenceName":"INVENTORY_install_in_batchRefName_GA1K","inputParameters":{"page_id":"${workflow.input.page_id}","page_size":"${workflow.input.page_size}","labels":"${workflow.input.labels}"},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]}],"inputParameters":[],"outputParameters":{},"schemaVersion":2,"restartable":true,"workflowStatusListenerEnabled":false,"ownerEmail":"fm-workflows","timeoutPolicy":"ALERT_ONLY","timeoutSeconds":0,"variables":{},"inputTemplate":{},"hasSchedule":false,"expectedScheduleName":"Install_from_inventory_batch:1"},{"updateTime":1676465364903,"name":"IOS_Upgrade","description":"{\"description\":\"Upgrade IOS device\"}","version":1,"tasks":[{"name":"CLI_execute_and_read_rpc_cli","taskReferenceName":"cli_execute_and_read_rpc_cli_ref_5YXL","description":"{\"description\": \"execute commands for a CLI device\", \"labels\": [\"BASICS\",\"CLI\"]}","inputParameters":{"device_id":"${workflow.input.device_id}","template":"show version\r\n","params":"","uniconfig_tx_id":""},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"CLI_execute_and_read_rpc_cli","taskReferenceName":"cli_execute_and_read_rpc_cli_ref_5YXA","description":"{\"description\": \"execute commands for a CLI device\", \"labels\": [\"BASICS\",\"CLI\"]}","inputParameters":{"device_id":"${workflow.input.device_id}","template":"show run\r\n","params":"","uniconfig_tx_id":""},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"CLI_execute_and_read_rpc_cli","taskReferenceName":"cli_execute_and_read_rpc_cli_ref_5YXV","description":"{\"description\": \"execute commands for a CLI device\", \"labels\": [\"BASICS\",\"CLI\"]}","inputParameters":{"device_id":"${workflow.input.device_id}","template":"conf t\r\nboot system flash:${workflow.input.image_file_name}\r\nend\r\n","params":"","uniconfig_tx_id":""},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"CLI_execute_and_expect_cli","taskReferenceName":"cli_execute_and_expect_cli_ref_85YP","description":"{\"description\": \"execute commands for a CLI device\", \"labels\": [\"BASICS\",\"CLI\"]}","inputParameters":{"device_id":"${workflow.input.device_id}","template":"\r\nreload in 00:01\nyes\n\r\n\r\r\n","params":"${workflow.input.params}","uniconfig_tx_id":"${workflow.input.uniconfig_tx_id}"},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"CLI_execute_and_read_rpc_cli","taskReferenceName":"cli_execute_and_read_rpc_cli_ref_5YXX","description":"{\"description\": \"execute commands for a CLI device\", \"labels\": [\"BASICS\",\"CLI\"]}","inputParameters":{"device_id":"${workflow.input.device_id}","template":"show reload\r\n","params":"","uniconfig_tx_id":""},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":5,"joinOn":[],"optional":true,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"CLI_execute_and_read_rpc_cli","taskReferenceName":"cli_execute_and_read_rpc_cli_ref_5YXB","description":"{\"description\": \"execute commands for a CLI device\", \"labels\": [\"BASICS\",\"CLI\"]}","inputParameters":{"device_id":"${workflow.input.device_id}","template":"show version\r\n","params":"","uniconfig_tx_id":""},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":360,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"CLI_execute_and_read_rpc_cli","taskReferenceName":"cli_execute_and_read_rpc_cli_ref_5YXQ","description":"{\"description\": \"execute commands for a CLI device\", \"labels\": [\"BASICS\",\"CLI\"]}","inputParameters":{"device_id":"${workflow.input.device_id}","template":"conf t\r\nno boot system flash:${workflow.input.image_file_name}\r\nend\r\n","params":"","uniconfig_tx_id":""},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"CLI_execute_and_read_rpc_cli","taskReferenceName":"cli_execute_and_read_rpc_cli_ref_5YXC","description":"{\"description\": \"execute commands for a CLI device\", \"labels\": [\"BASICS\",\"CLI\"]}","inputParameters":{"device_id":"${workflow.input.device_id}","template":"show run\r\n","params":"","uniconfig_tx_id":""},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]}],"inputParameters":[],"outputParameters":{},"schemaVersion":2,"restartable":true,"workflowStatusListenerEnabled":false,"ownerEmail":"fm-workflows","timeoutPolicy":"ALERT_ONLY","timeoutSeconds":0,"variables":{},"inputTemplate":{},"hasSchedule":false,"expectedScheduleName":"IOS_Upgrade:1"},{"updateTime":1676465368153,"name":"IOSXR_Upgrade","description":"{\"description\":\"Worfklow for upgrading IOS image versions on Cisco IOSXR devices\"}","version":1,"tasks":[{"name":"CLI_execute_and_read_rpc_cli","taskReferenceName":"cli_execute_and_read_rpc_cli_ref_5YXL","description":"{\"description\": \"execute commands for a CLI device\", \"labels\": [\"BASICS\",\"CLI\"]}","inputParameters":{"device_id":"${workflow.input.device_id}","template":"show processes cpu | include exec","params":"","uniconfig_tx_id":""},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"LAMBDA_TASK","taskReferenceName":"lambdaTaskRef_S9JO","inputParameters":{"lambdaValue":"${cli_execute_and_read_rpc_cli_ref_5YXL.output.response_body.output.output}","scriptExpression":"if ($.lambdaValue != null) {\n  var regex = /(\\d+)\\%.+$/g\n  var m = regex.exec($.lambdaValue)\n  if (m[1] != null) {\n    var value = parseInt(m[1])\n    if (value < 80) {\n      return \"true\"\n    }  \n  }\n}\nreturn \"false\""},"type":"LAMBDA","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"decisionTask","taskReferenceName":"decisionTaskRef_7EYQ","inputParameters":{"param":"true","notOverloaded":"${lambdaTaskRef_S9JO.output.result}"},"type":"DECISION","caseValueParam":"param","decisionCases":{"true":[{"name":"Post_to_Slack","taskReferenceName":"post_to_slack_ref_VSBL","description":"{\"description\": \"Post a message to your favorite Slack channel\", \"labels\": [\"SLACK\",\"HTTP\"]}","inputParameters":{"slack_webhook_id":"${workflow.input.slack_id}","message_text":"CPU levels satisfactory. Continuing with installation."},"type":"SUB_WORKFLOW","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"subWorkflowParam":{"name":"Post_to_Slack","version":1},"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]}]},"defaultCase":[{"name":"TERMINATE_TASK","taskReferenceName":"terminateTaskRef_9DSE","inputParameters":{"terminationStatus":"COMPLETED","workflowOutput":"CPU utilization levels too high, install aborted."},"type":"TERMINATE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]}],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"CLI_execute_and_read_rpc_cli","taskReferenceName":"cli_execute_and_read_rpc_cli_ref_MIN5","description":"{\"description\": \"execute commands for a CLI device\", \"labels\": [\"BASICS\",\"CLI\"]}","inputParameters":{"device_id":"${workflow.input.device_id}","template":"admin\ninstall add source disk0: tar harddisk:${workflow.input.ios_file_name}","params":"","uniconfig_tx_id":""},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":true,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"Post_to_Slack","taskReferenceName":"post_to_slack_ref_JF4A","inputParameters":{"slack_webhook_id":"${workflow.input.slack_id}","message_text":"First install command issued."},"type":"SUB_WORKFLOW","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"subWorkflowParam":{"name":"Post_to_Slack","version":1},"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"CLI_unmount_cli","taskReferenceName":"cli_unmount_cli_ref_6G13","description":"{\"description\": \"unmount a CLI device\", \"labels\": [\"BASICS\",\"CLI\"]}","inputParameters":{"device_id":"${workflow.input.device_id}","uniconfig_tx_id":""},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"CLI_mount_cli","taskReferenceName":"cli_mount_cli_ref_S34Y","description":"{\"description\": \"mount a CLI device\", \"labels\": [\"BASICS\",\"CLI\"]}","inputParameters":{"device_id":"${workflow.input.device_id}","type":"${workflow.input.device_type}","version":"${workflow.input.device_version}","host":"${workflow.input.device_host_ip}","protocol":"${workflow.input.device_protocol}","port":"${workflow.input.device_port}","username":"${workflow.input.device_username}","password":"${workflow.input.device_password}","uniconfig_tx_id":""},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":120,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"loopTask","taskReferenceName":"looptask_ref_786J","description":"Do while task","inputParameters":{"value":"","device_id":"${workflow.input.device_id}","params":"","uniconfig_tx_id":""},"type":"SUB_WORKFLOW","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":5,"subWorkflowParam":{"name":"IOSXR_Upgrade_loopTask","version":1},"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"CLI_execute_and_read_rpc_cli","taskReferenceName":"cli_execute_and_read_rpc_cli_ref_YFI1","inputParameters":{"device_id":"${workflow.input.device_id}","template":"show install log","params":"","uniconfig_tx_id":""},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":5,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"LAMBDA_TASK","taskReferenceName":"lambdaTaskRef_CW8G","inputParameters":{"lambdaValue":"${cli_execute_and_read_rpc_cli_ref_YFI1.output.response_body.output.output}","scriptExpression":"if ($.lambdaValue != null) {\n  var regex = /Install operation (\\d+)(?![\\s\\S]*Install operation)/g\n  var id = regex.exec($.lambdaValue)[1]\n  return id\n}\nreturn \"0\""},"type":"LAMBDA","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"CLI_execute_cli","taskReferenceName":"cli_execute_cli_ref_LVE8","description":"{\"description\": \"execute commands for a CLI device\", \"labels\": [\"BASICS\",\"CLI\"]}","inputParameters":{"device_id":"${workflow.input.device_id}","template":"admin\ninstall activate id ${lambdaTaskRef_CW8G.output.result}\ny","params":"","uniconfig_tx_id":""},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":true,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"CLI_unmount_cli","taskReferenceName":"cli_unmount_cli_ref_6G14","description":"{\"description\": \"unmount a CLI device\", \"labels\": [\"BASICS\",\"CLI\"]}","inputParameters":{"device_id":"${workflow.input.device_id}","uniconfig_tx_id":""},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"CLI_mount_cli","taskReferenceName":"cli_mount_cli_ref_S34Z","description":"{\"description\": \"mount a CLI device\", \"labels\": [\"BASICS\",\"CLI\"]}","inputParameters":{"device_id":"${workflow.input.device_id}","type":"${workflow.input.device_type}","version":"${workflow.input.device_version}","host":"${workflow.input.device_host_ip}","protocol":"${workflow.input.device_protocol}","port":"${workflow.input.device_port}","username":"${workflow.input.device_username}","password":"${workflow.input.device_password}","uniconfig_tx_id":""},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":1200,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"CLI_execute_and_read_rpc_cli","taskReferenceName":"cli_execute_and_read_rpc_cli_ref_YFI4","inputParameters":{"device_id":"${workflow.input.device_id}","template":"admin\ninstall commit","params":"","uniconfig_tx_id":""},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":5,"joinOn":[],"optional":true,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"Post_to_Slack","taskReferenceName":"post_to_slack_ref_JF4B","inputParameters":{"slack_webhook_id":"${workflow.input.slack_id}","message_text":"Installation finished"},"type":"SUB_WORKFLOW","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"subWorkflowParam":{"name":"Post_to_Slack","version":1},"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]}],"inputParameters":[],"outputParameters":{},"schemaVersion":2,"restartable":true,"workflowStatusListenerEnabled":false,"ownerEmail":"fm-workflows","timeoutPolicy":"ALERT_ONLY","timeoutSeconds":0,"variables":{},"inputTemplate":{},"hasSchedule":false,"expectedScheduleName":"IOSXR_Upgrade:1"},{"createTime":1616693943495,"updateTime":1676465367015,"name":"IOSXR_Upgrade_loopTask","description":"{\"description\":\"Do-while workflow task used in IOSXR_Upgrade workflow\"}","version":1,"tasks":[{"name":"loop_task","taskReferenceName":"LoopTask","inputParameters":{"value":"${workflow.input.value}"},"type":"DO_WHILE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopCondition":"if ($.LoopTask[String($.LoopTask['iteration'])]['lambdaTaskRef_CW8T'].result == false) {true} else {false}","loopOver":[{"name":"CLI_execute_and_read_rpc_cli","taskReferenceName":"cli_execute_and_read_rpc_cli_ref_V406","description":"{\"description\": \"execute commands for a CLI device\", \"labels\": [\"BASICS\",\"CLI\"]}","inputParameters":{"device_id":"${workflow.input.device_id}","template":"show install request","params":"${workflow.input.params}","uniconfig_tx_id":"${workflow.input.uniconfig_tx_id}"},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":30,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"LAMBDA_TASK","taskReferenceName":"lambdaTaskRef_CW8T","inputParameters":{"lambdaValue":"${cli_execute_and_read_rpc_cli_ref_V406.output.response_body.output.output}","scriptExpression":"if ($.lambdaValue != null) {\n  var regex = /The operation is \\d+% complete/g\n  var found = $.lambdaValue.match(regex)\n  return found == null\n}\nreturn true"},"type":"LAMBDA","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]}]}],"inputParameters":[],"outputParameters":{},"schemaVersion":2,"restartable":true,"workflowStatusListenerEnabled":false,"ownerEmail":"fm-workflows","timeoutPolicy":"ALERT_ONLY","timeoutSeconds":0,"variables":{},"inputTemplate":{},"hasSchedule":false,"expectedScheduleName":"IOSXR_Upgrade_loopTask:1"},{"updateTime":1676465364185,"name":"LLDP_discovery_one_device","description":"{\"description\":\"Discover LLDP config of installed device \",\"labels\":[\"LLDP\"]}","version":1,"tasks":[{"name":"LLDP_input_validation","taskReferenceName":"lldp_input_validation","inputParameters":{"device_name":"${workflow.input.device_name}","device_software":"${workflow.input.device_software}"},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"decisionTask","taskReferenceName":"lldp_determine_the_request_method","inputParameters":{"device_softwaree":"${workflow.input.device_software}"},"type":"DECISION","caseValueParam":"device_softwaree","decisionCases":{"ios xr":[{"name":"Netconf_read_structured_device_data","taskReferenceName":"netconf_read_structured_device_data_ref_2433","inputParameters":{"device_id":"${workflow.input.device_name}","uri":"/Cisco-IOS-XR-ethernet-lldp-oper:lldp"},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"LLDP_parse_netconf_iosxr","taskReferenceName":"lldp_parse_netconf_iosxr","inputParameters":{"netconf_data":"${netconf_read_structured_device_data_ref_2433.output.response_body}"},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]}],"saos":[{"name":"CLI_execute_and_read_rpc_cli","taskReferenceName":"cli_execute_and_read_rpc_cli_saos_6_and_8","inputParameters":{"device_id":"${workflow.input.device_name}","template":"lldp show neighbors","params":""},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"LLDP_read_and_parse_rpc_cli_saos_6_and_8","taskReferenceName":"lldp_read_and_parse_rpc_cli_saos_6_and_8","inputParameters":{"rpc_input":"${cli_execute_and_read_rpc_cli_saos_6_and_8.output.response_body.output.output}"},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]}]},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"lldp_identification_exclusive_join","taskReferenceName":"lldp_identification_exclusive_join","inputParameters":{},"type":"EXCLUSIVE_JOIN","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":["lldp_read_and_parse_rpc_cli_saos_6_and_8","lldp_parse_netconf_iosxr"],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"terminate","taskReferenceName":"terminate_completed","inputParameters":{"terminationStatus":"COMPLETED","workflowOutput":{"lldp_config":"${lldp_identification_exclusive_join.output.lldp_config}"}},"type":"TERMINATE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]}],"inputParameters":["{\"device_name\":{\"value\":\"\",\"description\":\"Unique identifier of installed device\"},\"device_software\": {\"value\": \"\",\"description\":\"Software of device. Allowed: [saos, ios xr]\",\"type\":\"string\"}}"],"outputParameters":{},"schemaVersion":2,"restartable":true,"workflowStatusListenerEnabled":true,"ownerEmail":"fm-workflows","timeoutPolicy":"ALERT_ONLY","timeoutSeconds":0,"variables":{},"inputTemplate":{},"hasSchedule":false,"expectedScheduleName":"LLDP_discovery_one_device:1"},{"updateTime":1676465363419,"name":"Mount_apply_template_unmount_cli","description":"mount, check, apply template and unmount a CLI device - DEMO,CLI","version":1,"tasks":[{"name":"CLI_mount_cli","taskReferenceName":"mount","inputParameters":{"device_id":"${workflow.input.device_id}","type":"${workflow.input.type}","version":"${workflow.input.version}","host":"${workflow.input.host}","protocol":"${workflow.input.protocol}","port":"${workflow.input.port}","username":"${workflow.input.username}","password":"${workflow.input.password}"},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"CLI_execute_and_read_rpc_cli","taskReferenceName":"execute_template","inputParameters":{"device_id":"${workflow.input.device_id}","template":"${workflow.input.template}","params":"${workflow.input.params}"},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"CLI_unmount_cli","taskReferenceName":"unmount","inputParameters":{"device_id":"${workflow.input.device_id}"},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]}],"inputParameters":["device_id[Unique identifier of device across all systems]","type[Type of device or device IOS e.g. ios, ios xr]","version[Version of device or device OS e.g. 15.2]","host[IP or hostname of the management endpoint on a device]","protocol[CLI management transport protocol e.g. tcp or ssh][ssh]","port[TCP port of the management endpoint of a device][22]","username[Username credential]","password[Password credential]"],"outputParameters":{"device_id":"${workflow.input.device_id}"},"schemaVersion":2,"restartable":true,"workflowStatusListenerEnabled":true,"ownerEmail":"fm-workflows","timeoutPolicy":"ALERT_ONLY","timeoutSeconds":0,"variables":{},"inputTemplate":{},"hasSchedule":false,"expectedScheduleName":"Mount_apply_template_unmount_cli:1"},{"updateTime":1676465367219,"name":"Post_to_Slack","description":"{\"description\": \"Post a message to your favorite Slack channel\", \"labels\": [\"SLACK\",\"HTTP\"]}","version":1,"tasks":[{"name":"http_get_generic","taskReferenceName":"http_post_generic_ref_6EHC","inputParameters":{"http_request":{"uri":"https://hooks.slack.com/services/${workflow.input.slack_webhook_id}","contentType":"application/json","body":{"text":"${workflow.input.message_text}"},"connectionTimeOut":"3600","readTimeOut":"3600","method":"POST"}},"type":"HTTP","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]}],"inputParameters":["{\"slack_webhook_id\":{\"value\":\"T7UQ7KATX/BP8M0S3EH/W3YpmbUr2fQDEA7WIoWcJIXX\",\"description\":\"The Slack webhook ID that you want to send this message to\",\"type\":\"string\"},\"message_text\":{\"value\":\"I am sitting in a room \",\"description\":\"The message that you want to send to Slack\",\"type\":\"string\"}}"],"outputParameters":{},"schemaVersion":2,"restartable":true,"workflowStatusListenerEnabled":false,"ownerEmail":"fm-workflows","timeoutPolicy":"ALERT_ONLY","timeoutSeconds":0,"variables":{},"inputTemplate":{},"hasSchedule":false,"expectedScheduleName":"Post_to_Slack:1"},{"updateTime":1676465364667,"name":"Provision_loopback_ipv4","description":"{\"description\":\"Allocate IP from pre-defined pool and provision loopback interface\",\"labels\":[\"RESOURCE_MANAGER\",\"UNICONFIG\",\"OPENCONFIG\"]}","version":1,"tasks":[{"name":"UNICONFIG_sync_from_network","taskReferenceName":"UNICONFIG_sync_from_networkRefName_eT7J","inputParameters":{"devices":"${workflow.input.device_id}","uniconfig_context":""},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"UNICONFIG_replace_config_with_oper","taskReferenceName":"UNICONFIG_replace_config_with_operRefName_kGSn","inputParameters":{"devices":"${workflow.input.device_id}","uniconfig_context":""},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"Allocate_ipv4_resource","taskReferenceName":"Allocate_ipv4_resourceRef_BNUn","inputParameters":{"pool_name":"${workflow.input.pool_name}","description":"","alternative_id":"","desired_value":""},"type":"SUB_WORKFLOW","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"subWorkflowParam":{"name":"Allocate_ipv4_resource","version":1},"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"UNICONFIG_write_structured_device_data","taskReferenceName":"UNICONFIG_write_structured_device_dataRefName_0agg","inputParameters":{"device_id":"${workflow.input.device_id}","uri":"/frinx-openconfig-interfaces:interfaces/interface=Loopback${workflow.input.loopback_id}","template":"{\"interface\": [{\"name\": \"Loopback${workflow.input.loopback_id}\", \"config\": {\"type\": \"iana-if-type:softwareLoopback\", \"enabled\": false, \"name\": \"Loopback${workflow.input.loopback_id}\"}, \"subinterfaces\": {\"subinterface\": [{\"index\": 0, \"config\": {\"index\": 0}, \"frinx-openconfig-if-ip:ipv4\": {\"addresses\": {\"address\": [{\"ip\": \"${Allocate_ipv4_resourceRef_BNUn.output.response_body.address}\", \"config\": {\"ip\": \"${Allocate_ipv4_resourceRef_BNUn.output.response_body.address}\", \"prefix-length\": 32}}]}}}]}}]}","params":"{}","uniconfig_context":""},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"UNICONFIG_commit","taskReferenceName":"UNICONFIG_commitRefName_nmL6","inputParameters":{"devices":"${workflow.input.device_id}","uniconfig_context":""},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]}],"inputParameters":["{\"device_id\": {\"description\": \"Unique identifier of a device\",\"type\": \"string\",\"value\": \"IOS01\"},\"loopback_id\": {\"value\": \"\",\"description\": \"Unique loopback identifier (e.g. 77)\",\"type\": \"string\"},\"pool_name\": {\"description\": \"Name of allocated IP pool to allocate IPs from\", \"type\": \"string\", \"value\": \"\"}}"],"outputParameters":{},"schemaVersion":2,"restartable":true,"workflowStatusListenerEnabled":false,"ownerEmail":"fm-workflows","timeoutPolicy":"ALERT_ONLY","timeoutSeconds":0,"variables":{},"inputTemplate":{},"hasSchedule":false,"expectedScheduleName":"Provision_loopback_ipv4:1"},{"updateTime":1676465364046,"name":"Provision_loopback_ipv4_multiple_devices","description":"{\"description\":\"Allocate IP from pre-defined pool and provision loopback interfaces of given devices with common label\",\"labels\":[\"RESOURCE_MANAGER\",\"UNICONFIG\",\"OPENCONFIG\"]}","version":1,"tasks":[{"name":"INVENTORY_get_all_devices_as_dynamic_fork_tasks","taskReferenceName":"INVENTORY_get_all_devices_as_dynamic_fork_tasksRefName_BVnf","inputParameters":{"labels":"${workflow.input.labels}","task":"Provision_loopback_ipv4","task_params":"{\"loopback_id\": \"${workflow.input.loopback_id}\", \"pool_name\": \"${workflow.input.pool_name}\"}","optional":"true"},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"dynamic_fork","taskReferenceName":"fork","inputParameters":{"dynamic_tasks":"${INVENTORY_get_all_devices_as_dynamic_fork_tasksRefName_BVnf.output.dynamic_tasks}","dynamic_tasks_i":"${INVENTORY_get_all_devices_as_dynamic_fork_tasksRefName_BVnf.output.dynamic_tasks_i}"},"type":"FORK_JOIN_DYNAMIC","decisionCases":{},"dynamicForkTasksParam":"dynamic_tasks","dynamicForkTasksInputParamName":"dynamic_tasks_i","defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"join","taskReferenceName":"join","inputParameters":{},"type":"JOIN","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]}],"inputParameters":["{\"pool_name\": {\"description\": \"Name of allocated IP pool to allocate IPs from\", \"type\": \"string\"}, \"labels\":{\"value\":\"CREATE_LOOPBACK_DEMO\",\"description\":\"\",\"type\":\"string\"},\"loopback_id\":{\"value\":\"\",\"description\":\"Unique loopback identifier (e.g. 77)\",\"type\":\"string\"}}"],"outputParameters":{},"schemaVersion":2,"restartable":true,"workflowStatusListenerEnabled":false,"ownerEmail":"fm-workflows","timeoutPolicy":"ALERT_ONLY","timeoutSeconds":0,"variables":{},"inputTemplate":{},"hasSchedule":false,"expectedScheduleName":"Provision_loopback_ipv4_multiple_devices:1"},{"updateTime":1676465365824,"name":"Read_components_openconfig","description":"{\"description\": \"Read components in openconfig format\", \"labels\": [\"DEMO\",\"PLATFORM\",\"UNIFIED\",\"OPENCONFIG\"]}","version":1,"tasks":[{"name":"OC-PLATFORM_read_components","taskReferenceName":"OC-PLATFORM_read_components","inputParameters":{"device_id":"${workflow.input.device_id}"},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]}],"inputParameters":["{\"device_id\":{\"value\":\"\",\"description\":\"Unique device identifier. Example: IOS01\",\"type\":\"string\"}}"],"outputParameters":{"components":"${OC-PLATFORM_read_components.output.response_body}"},"schemaVersion":2,"restartable":true,"workflowStatusListenerEnabled":true,"ownerEmail":"fm-workflows","timeoutPolicy":"ALERT_ONLY","timeoutSeconds":0,"variables":{},"inputTemplate":{},"hasSchedule":false,"expectedScheduleName":"Read_components_openconfig:1"},{"updateTime":1676465365582,"name":"Read_journal_cli_device","description":"{\"description\": \"Read cli journal for a device\", \"labels\": [\"BASICS\",\"CLI\"]}","version":1,"tasks":[{"name":"CLI_get_cli_journal","taskReferenceName":"CLI_get_cli_journal","inputParameters":{"device_id":"${workflow.input.device_id}"},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]}],"inputParameters":["{\"device_id\":{\"value\":\"\",\"description\":\"Unique identifier of device. Example: IOS01\",\"type\":\"string\"}}"],"outputParameters":{"journal":"${CLI_get_cli_journal.output.response_body.output.journal}"},"schemaVersion":2,"restartable":true,"workflowStatusListenerEnabled":false,"ownerEmail":"fm-workflows","timeoutPolicy":"ALERT_ONLY","timeoutSeconds":0,"variables":{},"inputTemplate":{},"hasSchedule":false,"expectedScheduleName":"Read_journal_cli_device:1"},{"updateTime":1676465366404,"name":"RM_claim_data_from_pool","description":"{\"description\":\"Claim data from pool\",\"labels\":[\"RESOURCE_MANAGER\"]}","version":1,"tasks":[{"name":"HTTP_task","taskReferenceName":"graphql_QzEP","inputParameters":{"http_request":{"contentType":"application/json","method":"POST","headers":{"x-tenant-id":"frinx_test","from":"workflow","x-auth-user-groups":"OWNER"},"timeout":3600,"uri":"http://krakend:8080/api/uniresource","body":{"query":"query SearchPools($pool_tag: String!) {\n    SearchPoolsByTags(\n        tags: { matchesAny: [{matchesAll: [$pool_tag]}]}\n        ) {\n        id\n    }\n}","variables":{"pool_tag":"${workflow.input.pool_tag}"}}}},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"LAMBDA_TASK","taskReferenceName":"lambda_gOUI","inputParameters":{"lambdaValue":"${graphql_QzEP.output.body}","scriptExpression":"return JSON.parse($.lambdaValue);"},"type":"LAMBDA","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"HTTP_task","taskReferenceName":"graphql_fpdX","inputParameters":{"http_request":{"contentType":"application/json","method":"POST","headers":{"x-tenant-id":"frinx_test","from":"workflow","x-auth-user-groups":"OWNER"},"timeout":3600,"uri":"http://krakend:8080/api/uniresource","body":{"query":"mutation ClaimResource($root_pool_id: ID!, $pe_name: String!, $prefix_size: Int!) {\n    ClaimResource(\n        poolId: $root_pool_id,\n        description: $pe_name,\n        userInput: { desiredSize: $prefix_size })\n    {\n        id\n        Properties\n    }\n}","variables":{"root_pool_id":"${lambda_gOUI.output.result.data.SearchPoolsByTags.0.id}","pe_name":"${workflow.input.pool_tag}","prefix_size":256}}}},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"LAMBDA_TASK","taskReferenceName":"lambda_bOUI","inputParameters":{"lambdaValue":"${graphql_fpdX.output.body}","scriptExpression":"return JSON.parse($.lambdaValue);"},"type":"LAMBDA","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]}],"inputParameters":[],"outputParameters":{},"schemaVersion":2,"restartable":true,"workflowStatusListenerEnabled":false,"ownerEmail":"fm-workflows","timeoutPolicy":"ALERT_ONLY","timeoutSeconds":0,"variables":{},"inputTemplate":{},"hasSchedule":false,"expectedScheduleName":"RM_claim_data_from_pool:1"},{"updateTime":1676465363690,"name":"UC_TX_close","description":"{\"description\":\"Close a running uniconfig TX in case it was started by the same WF\",\"labels\":[\"TX\", \"MULTIZONE\"]}","version":1,"tasks":[{"name":"decide_task","taskReferenceName":"should_close_current_tx","inputParameters":{"started_by_wf":"${workflow.input.uniconfig_context.started_by_wf}","parent_wf":"${workflow.parentWorkflowId}"},"type":"DECISION","caseExpression":"$.started_by_wf === $.parent_wf ? 'True' : 'False'","decisionCases":{"True":[{"name":"UNICONFIG_tx_close_multizone","taskReferenceName":"close","inputParameters":{"uniconfig_context":"${workflow.input.uniconfig_context}"},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"terminate","taskReferenceName":"closed_tx","inputParameters":{"terminationStatus":"COMPLETED","workflowOutput":{"closed_current_context":"${workflow.input.uniconfig_context}"}},"type":"TERMINATE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]}],"False":[{"name":"terminate","taskReferenceName":"dont_close_parent_tx","inputParameters":{"terminationStatus":"COMPLETED","workflowOutput":{"unclosed_parent_uniconfig_context":"${workflow.input.uniconfig_context}"}},"type":"TERMINATE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]}]},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]}],"inputParameters":[],"outputParameters":{},"schemaVersion":2,"restartable":false,"workflowStatusListenerEnabled":true,"ownerEmail":"fm-workflows","timeoutPolicy":"ALERT_ONLY","timeoutSeconds":60,"variables":{},"inputTemplate":{},"hasSchedule":false,"expectedScheduleName":"UC_TX_close:1"},{"updateTime":1676465363586,"name":"UC_TX_commit","description":"{\"description\":\"Commit a running uniconfig TX in case it was started by the same WF\",\"labels\":[\"TX\", \"MULTIZONE\"]}","version":1,"tasks":[{"name":"decide_task","taskReferenceName":"should_commit_current_tx","inputParameters":{"started_by_wf":"${workflow.input.uniconfig_context.started_by_wf}","parent_wf":"${workflow.parentWorkflowId}"},"type":"DECISION","caseExpression":"$.started_by_wf === $.parent_wf ? 'True' : 'False'","decisionCases":{"True":[{"name":"UNICONFIG_commit","taskReferenceName":"commit_multizone","inputParameters":{"devices":"${workflow.input.devices}","uniconfig_context":"${workflow.input.uniconfig_context}"},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"terminate","taskReferenceName":"committed_tx","inputParameters":{"terminationStatus":"COMPLETED","workflowOutput":{"committed_current_context":"${workflow.input.uniconfig_context}"}},"type":"TERMINATE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]}],"False":[{"name":"terminate","taskReferenceName":"dont_commit_parent_tx","inputParameters":{"terminationStatus":"COMPLETED","workflowOutput":{"uncommitted_parent_uniconfig_context":"${workflow.input.uniconfig_context}"}},"type":"TERMINATE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]}]},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]}],"inputParameters":[],"outputParameters":{},"schemaVersion":2,"restartable":false,"workflowStatusListenerEnabled":true,"ownerEmail":"fm-workflows","timeoutPolicy":"ALERT_ONLY","timeoutSeconds":1200,"variables":{},"inputTemplate":{},"hasSchedule":false,"expectedScheduleName":"UC_TX_commit:1"},{"updateTime":1676465363504,"name":"UC_TX_rollback","description":"{\"description\":\"Rolls back all transactions from current workflow\",\"labels\":[\"TX\", \"MULTIZONE\"]}","version":1,"tasks":[{"name":"UNICONFIG_tx_find_started","taskReferenceName":"find","inputParameters":{"failed_wf_id":"${workflow.input.workflowId}"},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"UNICONFIG_tx_rollback","taskReferenceName":"rollback","inputParameters":{"uniconfig_contexts":"${find.output.uniconfig_contexts}","committed_contexts":"${find.output.committed_contexts}"},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]}],"inputParameters":[],"outputParameters":{"uniconfig_contexts":"${rollback.output.uniconfig_contexts}"},"schemaVersion":2,"restartable":false,"workflowStatusListenerEnabled":true,"ownerEmail":"fm-workflows","timeoutPolicy":"ALERT_ONLY","timeoutSeconds":600,"variables":{},"inputTemplate":{},"hasSchedule":false,"expectedScheduleName":"UC_TX_rollback:1"},{"updateTime":1676465363823,"name":"UC_TX_start","description":"{\"description\":\"Reuse a running uniconfig TX or start a new one if no uniconfig context is provided\",\"labels\":[\"TX\", \"MULTIZONE\"]}","version":1,"tasks":[{"name":"decide_task","taskReferenceName":"should_reuse_parent_tx","inputParameters":{"parent_tx_multizone":"${workflow.input.uniconfig_context.uniconfig_cookies_multizone}"},"type":"DECISION","caseExpression":"$.parent_tx_multizone ? 'True' : 'False'","decisionCases":{"False":[{"name":"UNICONFIG_tx_create_multizone","taskReferenceName":"create","inputParameters":{"devices":"${workflow.input.devices}","oam_domain":"${workflow.input.oam_domain}"},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"terminate","taskReferenceName":"return_new_tx_id","inputParameters":{"terminationStatus":"COMPLETED","workflowOutput":{"uniconfig_context":{"uniconfig_cookies_multizone":"${create.output.uniconfig_cookies_multizone}","started_by_wf":"${workflow.parentWorkflowId}"}}},"type":"TERMINATE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]}],"True":[{"name":"terminate","taskReferenceName":"return_parent_tx_id","inputParameters":{"terminationStatus":"COMPLETED","workflowOutput":{"uniconfig_context":"${workflow.input.uniconfig_context}"}},"type":"TERMINATE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]}]},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]}],"inputParameters":[],"outputParameters":{},"schemaVersion":2,"restartable":false,"workflowStatusListenerEnabled":true,"ownerEmail":"fm-workflows","timeoutPolicy":"ALERT_ONLY","timeoutSeconds":60,"variables":{},"inputTemplate":{},"hasSchedule":false,"expectedScheduleName":"UC_TX_start:1"},{"updateTime":1676465365708,"name":"Uniconfig_policy_filter_XR","description":"{\"description\": \"Workflow that returns interface name based on description that user provides. Chosen policy-map is then applied on that interface. Configured for IOS XR devices\"}","version":1,"tasks":[{"name":"UNICONFIG_sync_from_network","taskReferenceName":"UNICONFIG_sync_from_networkRefName_jCBO","inputParameters":{"devices":"${workflow.input.device_id}"},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"UNICONFIG_replace_config_with_oper","taskReferenceName":"UNICONFIG_replace_config_with_operRefName_O4q7","inputParameters":{"devices":"${workflow.input.device_id}"},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"UNICONFIG_read_structured_device_data","taskReferenceName":"UNICONFIG_read_structured_device_dataRefName_8xGO","inputParameters":{"device_id":"${workflow.input.device_id}","uri":"${workflow.input.uri}"},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"jsonJQ_task","taskReferenceName":"jsonJQ_oOEn","inputParameters":{"key":"${UNICONFIG_read_structured_device_dataRefName_8xGO.output.response_body}","queryExpression":".key | .[\"frinx-uniconfig-topology:configuration\"][\"Cisco-IOS-XR-ifmgr-cfg:interface-configurations\"] . \"interface-configuration\" | select(. != null) | .[] | select(.description == \"${workflow.input.Description}\") | {interface: .\"interface-name\"}"},"type":"JSON_JQ_TRANSFORM","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"LAMBDA_TASK","taskReferenceName":"lambda_PdRu","inputParameters":{"lambdaValue":"${jsonJQ_oOEn.output.result.interface}","scriptExpression":"{return(encodeURIComponent($.lambdaValue));}"},"type":"LAMBDA","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"UNICONFIG_write_structured_device_data","taskReferenceName":"UNICONFIG_write_structured_device_place_policy_map","inputParameters":{"device_id":"${workflow.input.device_id}","uri":"/Cisco-IOS-XR-ifmgr-cfg:interface-configurations/interface-configuration=act,${lambda_PdRu.output.result}/Cisco-IOS-XR-qos-ma-cfg:qos/output/service-policy=${workflow.input.Policy_map_name}","template":"{\r\n    \"Cisco-IOS-XR-qos-ma-cfg:service-policy\": [\r\n      {\r\n        \"service-policy-name\": \"${workflow.input.Policy_map_name}\"\r\n      }\r\n    ]\r\n  }","params":"{}"},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"UNICONFIG_commit","taskReferenceName":"UNICONFIG_commitRefName_0MEk","inputParameters":{"devices":"${workflow.input.device_id}"},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]}],"inputParameters":["{\"device_id\":{\"value\":\"IOSXR\",\"description\":\"Device/node to be configured\",\"type\":\"string\"},\"uri\":{\"value\":\"\",\"description\":\"URI that will be searched. Leave blank unless specifically needed\",\"type\":\"string\"},\"Description\":{\"value\":\"test map description\",\"description\":\"Description of interface that will be filtered. Policy-map will be applied to interface with matching description.\",\"type\":\"string\"},\"Policy_map_name\":{\"value\":\"test_map\",\"description\":\"Policy map that should be applied to interface that fits the criteria\",\"type\":\"string\"}}"],"outputParameters":{},"schemaVersion":2,"restartable":true,"workflowStatusListenerEnabled":false,"ownerEmail":"fm-workflows","timeoutPolicy":"ALERT_ONLY","timeoutSeconds":0,"variables":{},"inputTemplate":{},"hasSchedule":false,"expectedScheduleName":"Uniconfig_policy_filter_XR:1"},{"updateTime":1676465365024,"name":"Uninstall_all_from_inventory","description":"{\"description\": \"Uninstall all devices from device inventory\", \"labels\": [\"INVENTORY\"]}","version":1,"tasks":[{"name":"INVENTORY_get_pages_cursors","taskReferenceName":"INVENTORY_get_pages_cursorsRefName_iHgJ","inputParameters":{"labels":"${workflow.input.labels}"},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"Loop Task","taskReferenceName":"LoopTask","inputParameters":{"value":"${INVENTORY_get_pages_cursorsRefName_iHgJ.output.page_size}"},"type":"DO_WHILE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopCondition":"if ( $.LoopTask['iteration'] < $.value ) { true; } else { false; }","loopOver":[{"name":"LAMBDA_TASK","taskReferenceName":"lambda_rMMU","inputParameters":{"lambdaValue":"${INVENTORY_get_pages_cursorsRefName_iHgJ.output.page_ids}","iterator":"${LoopTask.output.iteration}","scriptExpression":"if($.iterator == null){\n return $.lambdaValue[\"0\"]\n} else {\n return $.lambdaValue[$.iterator.toString()];\n}"},"type":"LAMBDA","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"INVENTORY_get_pages_cursors_fork_tasks","taskReferenceName":"read_inventory","inputParameters":{"task":"Uninstall_from_inventory_batch","page_ids":"${lambda_rMMU.output.result}","labels":"${workflow.input.labels}"},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"dynamic_fork","taskReferenceName":"fork","inputParameters":{"dynamic_tasks":"${read_inventory.output.dynamic_tasks}","dynamic_tasks_i":"${read_inventory.output.dynamic_tasks_i}"},"type":"FORK_JOIN_DYNAMIC","decisionCases":{},"dynamicForkTasksParam":"dynamic_tasks","dynamicForkTasksInputParamName":"dynamic_tasks_i","defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":true,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]},{"name":"join","taskReferenceName":"join","inputParameters":{},"type":"JOIN","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]}]}],"inputParameters":[],"outputParameters":{},"schemaVersion":2,"restartable":true,"workflowStatusListenerEnabled":false,"ownerEmail":"fm-workflows","timeoutPolicy":"ALERT_ONLY","timeoutSeconds":0,"variables":{},"inputTemplate":{},"hasSchedule":false,"expectedScheduleName":"Uninstall_all_from_inventory:1"},{"updateTime":1676465365921,"name":"Uninstall_device_by_id","description":"{\"description\": \"Uninstall device by ID\", \"labels\": [\"BASICS\",\"INVENTORY\",\"MAIN\"]}","version":1,"tasks":[{"name":"INVENTORY_uninstall_device_by_id","taskReferenceName":"INVENTORY_uninstall_device_by_idRefName_Txg0","inputParameters":{"device_id":"${workflow.input.device_id}"},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]}],"inputParameters":[],"outputParameters":{},"schemaVersion":2,"restartable":true,"workflowStatusListenerEnabled":false,"ownerEmail":"fm-workflows","timeoutPolicy":"ALERT_ONLY","timeoutSeconds":0,"variables":{},"inputTemplate":{},"hasSchedule":false,"expectedScheduleName":"Uninstall_device_by_id:1"},{"updateTime":1676465365365,"name":"Uninstall_device_by_name","description":"{\"description\": \"Uninstall device by name\", \"labels\": [\"BASICS\",\"INVENTORY\",\"MAIN\"]}","version":1,"tasks":[{"name":"INVENTORY_uninstall_device_by_name","taskReferenceName":"INVENTORY_uninstall_device_by_nameRefName_0uAx","inputParameters":{"device_name":"${workflow.input.device_name}"},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]}],"inputParameters":[],"outputParameters":{},"schemaVersion":2,"restartable":false,"workflowStatusListenerEnabled":false,"ownerEmail":"fm-workflows","timeoutPolicy":"ALERT_ONLY","timeoutSeconds":0,"variables":{},"inputTemplate":{},"hasSchedule":false,"expectedScheduleName":"Uninstall_device_by_name:1"},{"updateTime":1676465367316,"name":"Uninstall_from_inventory_batch","description":"{\"description\": \"Uninstall devices from inventory in batch\", \"labels\": [\"BASICS\",\"CLI\",\"NETCONF\",\"INVENTORY\",\"MAIN\"]}","version":1,"tasks":[{"name":"INVENTORY_uninstall_in_batch","taskReferenceName":"INVENTORY_uninstall_in_batchRefName_jPeY","inputParameters":{"page_id":"${workflow.input.page_id}","page_size":"${workflow.input.page_size}","labels":"${workflow.input.labels}"},"type":"SIMPLE","decisionCases":{},"defaultCase":[],"forkTasks":[],"startDelay":0,"joinOn":[],"optional":false,"defaultExclusiveJoinTask":[],"asyncComplete":false,"loopOver":[]}],"inputParameters":[],"outputParameters":{},"schemaVersion":2,"restartable":true,"workflowStatusListenerEnabled":false,"ownerEmail":"fm-workflows","timeoutPolicy":"ALERT_ONLY","timeoutSeconds":0,"variables":{},"inputTemplate":{},"hasSchedule":false,"expectedScheduleName":"Uninstall_from_inventory_batch:1"}]}
